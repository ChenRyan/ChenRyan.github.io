(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{374:function(t,a,s){"use strict";s.r(a);var n=s(15),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"react全家桶-all-in-one"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#react全家桶-all-in-one"}},[t._v("#")]),t._v(" React全家桶（All-in-One） ")]),t._v(" "),a("p",[t._v("本仓库内容根据哔哩哔哩 "),a("a",{attrs:{href:"https://www.bilibili.com/video/BV1Ey4y1u7vi?share_source=copy_web",target:"_blank",rel:"noopener noreferrer"}},[t._v("《2021版React技术全家桶》"),a("OutboundLink")],1),t._v("和 "),a("a",{attrs:{href:"https://www.bilibili.com/video/BV1wy4y1D7JT?p=74&share_source=copy_web",target:"_blank",rel:"noopener noreferrer"}},[t._v("《2020版React技术全家桶》"),a("OutboundLink")],1),t._v(" 视频整理的学习笔记，视频教程讲的特别好，配合本仓库的代码测试环境来练习，学习效果更佳，欢迎朋友们 Star 和 Fork。")]),t._v(" "),a("p",[t._v("（课程涉及的移动端开发请移步 => "),a("a",{attrs:{href:"https://github.com/Hengyu-DU/Mobile-Development",target:"_blank",rel:"noopener noreferrer"}},[t._v("移动端开发核心要点"),a("OutboundLink")],1),t._v("）")]),t._v(" "),a("p",[t._v("根据React基础部分知识，整理了一份3页的cheat sheet（小抄），便于快速查阅和复习遗忘的知识：\n"),a("img",{attrs:{src:"/React%E5%9F%BA%E7%A1%80%E9%80%9F%E6%9F%A5%E8%A1%A8/react.png",alt:"React基础知识速查表（预览）"}})]),t._v(" "),a("p",[a("strong",[t._v("React基础知识速查表，pdf版（共3页，"),a("a",{attrs:{href:"https://github.com/Hengyu-DU/React-All-in-One/tree/master/React%E5%9F%BA%E7%A1%80%E9%80%9F%E6%9F%A5%E8%A1%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击下载"),a("OutboundLink")],1),t._v("）")])]),t._v(" "),a("h1",{attrs:{id:"文档目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档目录"}},[t._v("#")]),t._v(" 文档目录 ")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E7%AC%AC1%E7%AB%A0-react%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"}},[t._v("第1章 React基础使用")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%AC%AC2%E7%AB%A0-react%E7%BB%84%E4%BB%B6%E5%BC%8F%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8"}},[t._v("第2章 React组件式开发应用")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%AC%AC3%E7%AB%A0-react%E8%B7%AF%E7%94%B1"}},[t._v("第3章 React路由")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%AC%AC4%E7%AB%A0-redux"}},[t._v("第4章 Redux")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%AC%AC5%E7%AB%A0-react%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86%E5%8F%8A%E6%80%BB%E7%BB%93"}},[t._v("第5章 React扩展知识及总结")])])]),t._v(" "),a("h1",{attrs:{id:"第1章-react基础使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1章-react基础使用"}},[t._v("#")]),t._v(" 第1章 React基础使用")]),t._v(" "),a("p",[t._v("基本语法部分参见React基础知识速查表（共3页，"),a("a",{attrs:{href:"https://github.com/Hengyu-DU/React-All-in-One/tree/master/React%E5%9F%BA%E7%A1%80%E9%80%9F%E6%9F%A5%E8%A1%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("点击下载"),a("OutboundLink")],1),t._v("）：")]),t._v(" "),a("h2",{attrs:{id:"_1-1-react"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-react"}},[t._v("#")]),t._v(" 1.1 React")]),t._v(" "),a("ol",[a("li",[t._v("用于动态构建用户界面的JavaScript库（只关注于试图）")]),t._v(" "),a("li",[t._v("由Facebook开源")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("React的特点")])]),t._v(" "),a("ol",[a("li",[t._v("声明式编码")]),t._v(" "),a("li",[t._v("组件化编码")]),t._v(" "),a("li",[t._v("React Native 编写原生应用")]),t._v(" "),a("li",[t._v("高效（优秀的Diffing算法）")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("React高效的原因")])]),t._v(" "),a("ol",[a("li",[t._v("使用虚拟DOM，不总是直接操作页面真实的DOM")]),t._v(" "),a("li",[t._v("DOM Diffing算法，最小化页面重绘")])])])]),t._v(" "),a("h2",{attrs:{id:"_1-2-模块与组件、模块化与组件化的理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-模块与组件、模块化与组件化的理解"}},[t._v("#")]),t._v(" 1.2 模块与组件、模块化与组件化的理解")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("模块：复用js")])]),t._v(" "),a("li",[a("p",[t._v("组件：用来实现局部功能效果的代码和资源的集合（html/css/js/image等），可以复用编码、简化、提高运行效率")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("定义组件的方式")])]),t._v(" "),a("ol",[a("li",[t._v("使用函数定义组件 （补救措施加上，目前官方推荐）")]),t._v(" "),a("li",[t._v("使用类定义组件 （最完整的功能）")])])])]),t._v(" "),a("h2",{attrs:{id:"_1-3-react应用-基于react脚手架"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-react应用-基于react脚手架"}},[t._v("#")]),t._v(" 1.3 React应用（基于React脚手架）")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("React脚手架")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("xxx 脚手架：用来帮助程序员快速创建一个基于xxx库的模板项目")]),t._v(" "),a("ul",[a("li",[t._v("包含了所有需要的配置（语法检查、jsx编译、devServer）")]),t._v(" "),a("li",[t._v("下载好了所有相关的依赖")]),t._v(" "),a("li",[t._v("可以直接运行一个简单的效果")])])]),t._v(" "),a("li",[a("p",[t._v("react提供了一个用于创建react项目的脚手架库： creat-react-app")])]),t._v(" "),a("li",[a("p",[t._v("项目的整体技术架构为： react + webpack + es6 + eslint")])]),t._v(" "),a("li",[a("p",[t._v("使用脚手架开发的项目特点： 模块化、组件化、工程化")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("创建项目并启动")]),t._v("\n第一步，全局安装 npm i -g create-react-app\n第二步，切换到想创项目的目录，使用命令 create-react-app hello-react\n第三步，进入项目文件夹 cd hello-react\n第四步，启动项目 npm start")])])]),t._v(" "),a("h1",{attrs:{id:"第2章-react组件式开发应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2章-react组件式开发应用"}},[t._v("#")]),t._v(" 第2章 React组件式开发应用")]),t._v(" "),a("h2",{attrs:{id:"_2-1-学习笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-学习笔记"}},[t._v("#")]),t._v(" 2.1 学习笔记")]),t._v(" "),a("ul",[a("li",[t._v("IOS\\Android应用开发方式：")])]),t._v(" "),a("ol",[a("li",[t._v("原生开发（OC\\JAVA）")]),t._v(" "),a("li",[t._v("经过翻译生成原生应用（ReactNative\\uniapp）")]),t._v(" "),a("li",[t._v("加壳")])]),t._v(" "),a("ul",[a("li",[t._v("输入‘rcc’可快速输入：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        \n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2-2-功能界面的组件化编码流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-功能界面的组件化编码流程"}},[t._v("#")]),t._v(" 2.2 功能界面的组件化编码流程")]),t._v(" "),a("h3",{attrs:{id:"_2-2-1-通用流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-通用流程"}},[t._v("#")]),t._v(" 2.2.1 通用流程  ")]),t._v(" "),a("ol",[a("li",[t._v("拆分组件：根据功能点划分组件。")]),t._v(" "),a("li",[t._v("实现静态组件：使用组件实现静态页面效果")]),t._v(" "),a("li",[t._v("实现动态组件\n3.1 动态显示初始化数据\n3.1.1 数据类型\n3.1.2 数据名称\n3.1.3 保存在哪个组件\n- 某个组件用：放在自身\n- 某些组件用：放在共同父组件中 ==> 状态提升\n3.2 交互（从绑定事件监听开始）")])]),t._v(" "),a("ul",[a("li",[t._v("状态在哪里，操作状态的方法就在哪里")])]),t._v(" "),a("h3",{attrs:{id:"_2-2-2-关于父子之间通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-关于父子之间通信"}},[t._v("#")]),t._v(" 2.2.2 关于父子之间通信 ")]),t._v(" "),a("ol",[a("li",[t._v("【父组件】给【子组件】传递数据：通过props传递")]),t._v(" "),a("li",[t._v("【子组件】给【父组件】传递数据：通过props传递，要求父提前给子传递一个有形参的函数")])]),t._v(" "),a("h3",{attrs:{id:"_2-2-3-关于check框"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-关于check框"}},[t._v("#")]),t._v(" 2.2.3 关于check框 ")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("checked:")]),t._v(" "),a("ul",[a("li",[t._v("不仅仅展示勾选的状态，后期还需要响应勾选的动作")]),t._v(" "),a("li",[t._v("注意：用了checked就必须配合onChange使用；")])])]),t._v(" "),a("li",[a("p",[t._v("defaultChecked：")]),t._v(" "),a("ul",[a("li",[t._v("只在第一次渲染时起作用，仅初次展示勾选状态，后期不会通过状态改变再次渲染。")])])]),t._v(" "),a("li",[a("p",[t._v("value和defaultValue也是同理的。")])])]),t._v(" "),a("h3",{attrs:{id:"_2-2-4-关于uuid-universally-unique-identifier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-关于uuid-universally-unique-identifier"}},[t._v("#")]),t._v(" 2.2.4 关于uuid (Universally Unique Identifier) ")]),t._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[t._v("$ npm i uuid\n")])])]),a("p",[t._v("使用：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" v4 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" uuidv4 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uuid'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("uuidv4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'")]),t._v("\n")])])]),a("h2",{attrs:{id:"_2-3-react-脚手架配置代理总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-react-脚手架配置代理总结"}},[t._v("#")]),t._v(" 2.3 react 脚手架配置代理总结")]),t._v(" "),a("ul",[a("li",[a("p",[a("em",[a("strong",[t._v("方法一：")])])]),t._v(" "),a("p",[t._v("在package.json中追加如下配置（端口号是目标服务器的端口号）：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"proxy"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:5000"')]),t._v("\n")])])]),a("p",[t._v("请求的地址改为本地地址+目标后缀")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000/students'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),t._v("\n")])])]),a("p",[t._v("说明：")]),t._v(" "),a("ol",[a("li",[t._v("优点：配置简单，前端请求资源时可以不加任何前缀")]),t._v(" "),a("li",[t._v("缺点：不能配置多个代理。")]),t._v(" "),a("li",[t._v("工作方式：上述方式配置代理，当用Ajax请求了3000不存在的资源时，该请求会转发给5000（如果3000存在资源，则优先匹配前端资源，localhost:3000 即是public路径）")])])]),t._v(" "),a("li",[a("p",[a("em",[a("strong",[t._v("方法二：")])])]),t._v(" "),a("p",[t._v("安装http-proxy-middleware,\n编写setupProxy.js配置具体代理规则：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("createProxyMiddleware"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http-proxy-middleware'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createProxyMiddleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只要/api 开头的请求，才转发给后端服务器")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:5000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("changeOrigin")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 控制服务器接收到的请求头中host字段的值")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// false(默认值)：服务器请求来自于原地址 localhost:3000")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true：服务器请求来自于5000（请求目标地址），可迷惑目标服务器")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pathRewrite")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'^/api1'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重写路径（目的：去掉api前缀）")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createProxyMiddleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("target")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:5001'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("changeOrigin")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pathRewrite")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v("'^/api2'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"_2-4-github搜索案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-github搜索案例"}},[t._v("#")]),t._v(" 2.4 GitHub搜索案例")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("列表展示页面需要暗藏几个元素：")]),t._v(" "),a("ol",[a("li",[t._v("welcome")]),t._v(" "),a("li",[t._v("loading...")]),t._v(" "),a("li",[t._v("users(内容展示)")]),t._v(" "),a("li",[t._v("error")])])]),t._v(" "),a("li",[a("p",[t._v("注意：通过response返回的error是一个对象，错误信息在下面的error.message")])])]),t._v(" "),a("h2",{attrs:{id:"_2-5-消息订阅与发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-消息订阅与发布"}},[t._v("#")]),t._v(" 2.5 消息订阅与发布")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("pubsub-js\nnpm install pubsub-js")])]),t._v(" "),a("li",[a("p",[t._v("先订阅，再发布")])]),t._v(" "),a("li",[a("p",[t._v("适用于任意组件间的通信")])]),t._v(" "),a("li",[a("p",[t._v("要在组件componentWillUnmount中取消订阅")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("PubSub.publish('status',data)\nthis.msgis = PubSub.subscribe('status',函数(_,data))\nPubSub.unsubscribe(this.msgid) // 取消订阅\n")])])]),a("h1",{attrs:{id:"第3章-react路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第3章-react路由"}},[t._v("#")]),t._v(" 第3章 React路由")]),t._v(" "),a("h2",{attrs:{id:"_3-1-相关理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-相关理解"}},[t._v("#")]),t._v(" 3.1 相关理解")]),t._v(" "),a("ul",[a("li",[a("p",[a("em",[a("strong",[t._v("SPA")])])]),t._v(" "),a("ol",[a("li",[t._v("单页Web应用（Single Page Web Application SPA）")]),t._v(" "),a("li",[t._v("整个应用只有"),a("strong",[t._v("一个完整的页面")])]),t._v(" "),a("li",[t._v("点击页面中的链接"),a("strong",[t._v("不会刷新")]),t._v("页面，只会做页面的"),a("strong",[t._v("局部更新")])]),t._v(" "),a("li",[t._v("数据都需要通过ajax请求获取，并在前端异步展现")])])]),t._v(" "),a("li",[a("p",[a("em",[a("strong",[t._v("路由")])])]),t._v(" "),a("ol",[a("li",[t._v("什么是路由？\n"),a("ol",[a("li",[t._v("一个路由就是一个映射关系（key:value）")]),t._v(" "),a("li",[t._v("key为路径，value可能是function或component")])])]),t._v(" "),a("li",[t._v("路由分类\n"),a("ol",[a("li",[t._v("后端路由：\n"),a("ul",[a("li",[t._v("理解： value 是 function, 用来处理客户端提交的请求。")]),t._v(" "),a("li",[t._v("注册路由："),a("code",[t._v("router.get(path, function(req, res))")])]),t._v(" "),a("li",[t._v("工作过程：当node接收到一个请求时，根据请求路径找到匹配的路由，调用路由中的函数来处理请求，返回响应数据。")])])]),t._v(" "),a("li",[t._v("前端路由：\n"),a("ul",[a("li",[t._v("浏览器端路由，value是component，用于展示页面内容")]),t._v(" "),a("li",[t._v("注册路由："),a("code",[t._v('<Route path="/test" component={Test}>')])]),t._v(" "),a("li",[t._v("工作过程：当浏览器的path变成/test时，当前路由组件就会变成Test组件")])])])])])])]),t._v(" "),a("li",[a("p",[a("em",[a("strong",[t._v("React-router（-DOM） 的理解")])])]),t._v(" "),a("ol",[a("li",[t._v("react 的一个插件库\n"),a("ul",[a("li",[t._v("一共有三个库 web\\native\\anywhere")])])]),t._v(" "),a("li",[t._v("专门用来实现一个SPA应用")]),t._v(" "),a("li",[t._v("基于react的web项目基本都会用到这个库。")])])])]),t._v(" "),a("h2",{attrs:{id:"_3-2-路由的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-路由的基本使用"}},[t._v("#")]),t._v(" 3.2 路由的基本使用")]),t._v(" "),a("ol",[a("li",[t._v("明确好界面中的导航区、展示区")]),t._v(" "),a("li",[t._v("导航区的a标签改为link标签 => 编写路由链接\n"),a("code",[t._v('<Link to="/abc">Demo</Link>')])]),t._v(" "),a("li",[t._v("展示区写Route标签进行路径的匹配 => 注册路由\n"),a("code",[t._v("<Route path='/abc' component={Demo}/>")])]),t._v(" "),a("li",[a("code",[t._v("\\<App>")]),t._v(" 的最外侧包裹了一个"),a("code",[t._v("<BrowserRouter>")]),t._v("或"),a("code",[t._v("<HashRouter>")])])]),t._v(" "),a("h2",{attrs:{id:"_3-3-路由组件与一般组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-路由组件与一般组件"}},[t._v("#")]),t._v(" 3.3 路由组件与一般组件")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("写法不同：")]),t._v(" "),a("ul",[a("li",[t._v("一般组件："),a("code",[t._v("<Demo/>")])]),t._v(" "),a("li",[t._v("路由组件："),a("code",[t._v("<Route path='/demo' component={Demo}/>")])])])]),t._v(" "),a("li",[a("p",[t._v("存放位置不同：")]),t._v(" "),a("ul",[a("li",[t._v("一般组件：components")]),t._v(" "),a("li",[t._v("路由组件：pages")])])]),t._v(" "),a("li",[a("p",[t._v("接收到的props不同：")]),t._v(" "),a("ul",[a("li",[t._v("一般组件：写组件标签时传递了什么，就能收到什么")]),t._v(" "),a("li",[t._v("路由组件：接收到三个固定的属性：")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('history:\n    go: ƒ go(n)\n    goBack: ƒ goBack()\n    goForward: ƒ goForward()\n    push: ƒ push(path, state)\n    replace: ƒ replace(path, state)\nlocation:\n    pathname: "/about"\n    search: ""\n    state: undefined\nmatch:\n    params: {}\n    path: "/about"\n    url: "/about"\n')])])])])]),t._v(" "),a("h2",{attrs:{id:"_3-4-navlink的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-navlink的使用"}},[t._v("#")]),t._v(" 3.4 NavLink的使用")]),t._v(" "),a("h3",{attrs:{id:"_3-4-1-基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-1-基本使用"}},[t._v("#")]),t._v(" 3.4.1 基本使用 ")]),t._v(" "),a("p",[t._v("首先引入：\nimport {NavLink} from 'react-router-dom'")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NavLink")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("activeClassName")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("atguigu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("list-group-item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/about"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("About")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NavLink")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NavLink")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("activeClassName")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("atguigu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("list-group-item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Home")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NavLink")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("activeClassName属性用来指定active状态下的类名，默认叫active")]),t._v(" "),a("li",[t._v("样式如果被bootstrap覆盖，则加 !important ：")])]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".atguigu")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cornflowerblue "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("!important")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" darkblue "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("!important")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-weight")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bold "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("!important")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-4-2-封装navlink"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-2-封装navlink"}},[t._v("#")]),t._v(" 3.4.2 封装NavLink ")]),t._v(" "),a("p",[t._v("封装一个MyNavLink：")]),t._v(" "),a("ol",[a("li",[t._v("index.js 中引入 NavLink")])]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" NavLink "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-dom'")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyNavLink")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("NavLink")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("activeClassName")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("atguigu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("className")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("list-group-item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token spread"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("{...this.props} 作为一个对象展开，其中包括children属性（标签体的内容，this.props.children）")])]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("App.jsx 中：\n只需将不同的部份以props的形式传入，即可完成封装组件的调用。")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyNavLink to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/about"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("About"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("MyNavLink"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyNavLink to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/home"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Home"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("MyNavLink"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-5-switch的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-switch的使用"}},[t._v("#")]),t._v(" 3.5 Switch的使用")]),t._v(" "),a("p",[t._v("用于解决路由单一匹配的效率问题，在相同路由下只会匹配一次。\n引入Switch：\nimport {Switch, Route} from 'react-router-dom'")]),t._v(" "),a("p",[t._v("用"),a("code",[t._v("<Switch>")]),t._v("标签包裹注册的路由：")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 注册路由 */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Switch")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Route")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/about"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("About"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Route")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n      ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Route")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n    ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Switch")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-6-解决样式丢失的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-解决样式丢失的问题"}},[t._v("#")]),t._v(" 3.6 解决样式丢失的问题")]),t._v(" "),a("p",[t._v("在路由地址添加多级路径时，二次刷新网页会导致样式丢失，\n解决方法一：\npublic/index.html中css引入时，去掉绝对地址的./，直接用/\n解决方法二：\npublic/index.html中css引入时，绝对路径以：  %PUBLIC_URL%   开头，代表public文件夹\n解决方法三：（不常用）\nindex.js中引入{HashRouter},而非{BrowserRouter}.")]),t._v(" "),a("h2",{attrs:{id:"_3-7-路由的模糊匹配和严格匹配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-路由的模糊匹配和严格匹配"}},[t._v("#")]),t._v(" 3.7 路由的模糊匹配和严格匹配")]),t._v(" "),a("ul",[a("li",[t._v("模糊匹配：\n只要to输入的路径与目标路径开头一致（包含目标路径），后面再接不同的也算匹配")]),t._v(" "),a("li",[t._v("严格匹配：\n必须完全一致")])]),t._v(" "),a("p",[t._v("除非页面出现问题，否则不轻易开启严格匹配，因为有时开启会导致无法匹配二级路由。\n开启严格匹配的方法：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 注册路由 */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Switch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route exact"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/about"')]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("About"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route exact"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/home"')]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Switch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("(仅写exact也是可以的)")]),t._v(" "),a("h2",{attrs:{id:"_3-8-redirect的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-8-redirect的使用"}},[t._v("#")]),t._v(" 3.8 Redirect的使用")]),t._v(" "),a("ol",[a("li",[t._v("一般写在所有路由注册的最下方，switch之内，当所有路由都无法匹配时，跳转到Redirect指定的路由。")]),t._v(" "),a("li",[t._v("具体编码：\n引入：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Switch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Route"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Redirect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-dom'")]),t._v("\n")])])]),a("p",[t._v("使用：")]),t._v(" "),a("div",{staticClass:"language-jsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-jsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Switch")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Route")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/about"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("About"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Route")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token script language-javascript"}},[a("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n  ")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Redirect")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/about"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("\n")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Switch")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-9-嵌套路由"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-9-嵌套路由"}},[t._v("#")]),t._v(" 3.9 嵌套路由")]),t._v(" "),a("ol",[a("li",[t._v("注册子路由时要写上父路由的path值")]),t._v(" "),a("li",[t._v("路由的匹配是按照注册路由的顺序进行的")])]),t._v(" "),a("h2",{attrs:{id:"_3-10-给路由组件传递参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-10-给路由组件传递参数"}},[t._v("#")]),t._v(" 3.10 给路由组件传递参数")]),t._v(" "),a("ul",[a("li",[t._v("*Ajax传递参数的方法：\n"),a("ol",[a("li",[t._v("query")]),t._v(" "),a("li",[t._v("params")]),t._v(" "),a("li",[t._v("body(包括\nurlencoded => key=value&key=value\njson)")])])])]),t._v(" "),a("ul",[a("li",[a("p",[a("em",[a("strong",[t._v("(1) params参数(props.match.params)")])])]),t._v(" "),a("ul",[a("li",[t._v("路由链接（携带参数）："),a("code",[t._v("<Link to='/demo/test/tom/18'>详情</Link>")])]),t._v(" "),a("li",[t._v("注册路由（声明接收）: "),a("code",[t._v('<Route path="/demo/test/:name/:age" component={Test}/>')])]),t._v(" "),a("li",[t._v("接收参数： const {name, age} = this.props.match.params")])])]),t._v(" "),a("li",[a("p",[a("em",[a("strong",[t._v("(2) search参数(props.location.search)")])])]),t._v(" "),a("ul",[a("li",[t._v("路由链接（携带参数）："),a("code",[t._v("<Link to='/demo/test?name=to&age=18'>详情</Link>")])]),t._v(" "),a("li",[t._v("注册路由（无需声明，正常注册即可）："),a("code",[t._v("<Route path='/demo/test' component={Test}/>")])]),t._v(" "),a("li",[t._v("接收参数：const {search} = this.props.location")]),t._v(" "),a("li",[t._v("备注：获取到的search是urlencoded编码字符串，需要借助querystring解析")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" qs "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'querystring'")]),t._v("  \n\nqs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'A'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("age")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'18'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结果为   name=A&age=18")]),t._v("\nqs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name=A&age=18'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结果为  {name:'A',age:'18'}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("em",[a("strong",[t._v("(3) state参数(props.location.state)")])])]),t._v(" "),a("ul",[a("li",[t._v("路由链接（携带参数）：\n")]),t._v(" "),a("li",[t._v("注册路由（无需声明，正常注册即可）："),a("code",[t._v("<Route path='/demo/test' component={Test}/>")])]),t._v(" "),a("li",[t._v("接收参数：const {state} = this.props.location")]),t._v(" "),a("li",[t._v("备注：刷新也可保留住参数！！！（删除浏览器缓存和历史记录后则会失效）")])])])]),t._v(" "),a("h2",{attrs:{id:"_3-11-replace与push"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-11-replace与push"}},[t._v("#")]),t._v(" 3.11 replace与push")]),t._v(" "),a("p",[t._v("如果开启了replace模式，则新点击的路由组件会替换栈顶的历史记录，将不可以回退。\n开启方式：在路由组件中加 replace={true} 或 直接 replace")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyNavLink replace to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/home/message"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("Message"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("MyNavLink"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"_3-12-编程式路由导航"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-12-编程式路由导航"}},[t._v("#")]),t._v(" 3.12 编程式路由导航")]),t._v(" "),a("p",[t._v("借助this.props.history对象上的API对操作路由跳转、前进、后退")]),t._v(" "),a("ul",[a("li",[t._v("this.props.history.push(path[,state])")]),t._v(" "),a("li",[t._v("this.props.history.replace(path[,state])")]),t._v(" "),a("li",[t._v("this.props.history.goBack()")]),t._v(" "),a("li",[t._v("this.props.history.goForward()")]),t._v(" "),a("li",[t._v("this.props.history.go(n)")])]),t._v(" "),a("h2",{attrs:{id:"_3-13-withrouter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-13-withrouter"}},[t._v("#")]),t._v(" 3.13 withRouter()")]),t._v(" "),a("p",[t._v("withRouter函数可以加工一般组件，让一般组件具备路由组件所特有的API，其返回值是一个新组件\n引入：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("import {withRouter} from 'react-router-dom'\n")])])]),a("p",[t._v("在需要加工的一般组件内使用：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("export default withRouter(Header)\n")])])]),a("h2",{attrs:{id:"_3-14-browserrouter与hashrouter的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-14-browserrouter与hashrouter的区别"}},[t._v("#")]),t._v(" 3.14 BrowserRouter与HashRouter的区别")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("1. 底层原理不一样：\n\n- BrowserRouter使用的是H5的history API，不兼容IE9及以下版本。\n- HashRouter使用的是URL的哈希值\n\n2. path表现形式不一样\n\n- BrowserRouter的路径中没有#\n- HashRouter的路径包含#\n\n3. 刷新对路由state参数的影响\n\n- （1）BrowserRouter无影响，因为state保存在history对象中\n- （2）HashRouter刷新后会导致路由state参数的丢失！！！\n\n4. 备注：HashRouter可以用于解决一些路径错误相关的问题。\n")])])]),a("h1",{attrs:{id:"第4章-redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第4章-redux"}},[t._v("#")]),t._v(" 第4章 Redux")]),t._v(" "),a("h2",{attrs:{id:"_4-1-redux简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-redux简介"}},[t._v("#")]),t._v(" 4.1  redux简介")]),t._v(" "),a("p",[a("strong",[t._v("1. redux是什么？")])]),t._v(" "),a("ol",[a("li",[t._v("redux是一个专门用于做"),a("strong",[t._v("状态管理")]),t._v("的JS库（不是react插件库）")]),t._v(" "),a("li",[t._v("基本与react配合使用")]),t._v(" "),a("li",[t._v("作用：集中式管理react应用中多个组件"),a("strong",[t._v("共享的state状态")])])]),t._v(" "),a("p",[a("strong",[t._v("2. 工作流程")])]),t._v(" "),a("p",[t._v("​\t"),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"C:/Users/victo/Desktop/source/Q  React/4-Redux/原理图/redux原理图.png"}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("需要创建的文件：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("    components\n    redux\n      |- action.js\n      |- reducer.js\n      |- store.js\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"_4-2-求和案例-redux迷你版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-求和案例-redux迷你版"}},[t._v("#")]),t._v(" 4.2  求和案例 redux迷你版")]),t._v(" "),a("h2",{attrs:{id:"_4-3-求和案例-redux完整版"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-求和案例-redux完整版"}},[t._v("#")]),t._v(" 4.3  求和案例 redux完整版")]),t._v(" "),a("p",[t._v("总体需要安装的包：")]),t._v(" "),a("ol",[a("li",[t._v("redux")]),t._v(" "),a("li",[t._v("redux-thunk")]),t._v(" "),a("li",[t._v("react-redux")]),t._v(" "),a("li",[t._v("redux-devtools-extension")])]),t._v(" "),a("ul",[a("li",[t._v("注意：index.js中要使用store.subscribe来检测redux中状态的改变")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-4-异步action"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-异步action"}},[t._v("#")]),t._v(" 4.4 异步action")]),t._v(" "),a("p",[t._v("引入 applyMiddleware\n引入 thunk")]),t._v(" "),a("ul",[a("li",[t._v("在store.js中：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" applyMiddleware "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" countReducer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./count_reducer'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" thunk "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux-thunk'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入用于支持异步action的中间件")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("countReducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyMiddleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" store\n")])])]),a("ul",[a("li",[t._v("异步action函数的返回值是一个函数，而不是{type,action}对象，因此store会自动识别出来。同时无需引入store，可直接在返回值函数中使用dispatch。")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("creatIncrementAsyncAction")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("time")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("creatIncrementAction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-5-react-redux的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-react-redux的基本使用"}},[t._v("#")]),t._v(" 4.5  react-redux的基本使用")]),t._v(" "),a("p",[t._v("（1） 明确两个概念：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("1）UI 组件： 不能使用任何redux的API，只负责页面的呈现、交互等")])]),t._v(" "),a("li",[a("p",[t._v("1）容器组件：负责和redux通信，结果交给UI组件")])])]),t._v(" "),a("p",[t._v("（2）如何创建一个容器组件：靠react-redux的 connect函数")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("引入：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("connect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("写法：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mapStateToProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mapDispatchToProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UI")]),t._v("组件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ul",[a("li",[t._v("mapStateToProps 映射状态，返回值需要是一个对象")]),t._v(" "),a("li",[t._v("mapDispatchToProps 映射操作状态的方法，返回值需是一个对象")])])])]),t._v(" "),a("p",[t._v("（3）备注：容器组件中的store是在App.jsx中靠props传进去的，不是在容器组件中直接引入")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./redux/store'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("CountContainer store"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),t._v(" "),a("img",{staticStyle:{zoom:"33%"},attrs:{src:"C:/Users/victo/Desktop/source/Q  React/4-Redux/原理图/react-redux模型图.png"}}),t._v(" "),a("h2",{attrs:{id:"_4-6-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-优化"}},[t._v("#")]),t._v(" 4.6 优化")]),t._v(" "),a("h3",{attrs:{id:"_4-6-1-容器优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-1-容器优化"}},[t._v("#")]),t._v(" 4.6.1 容器优化 ")]),t._v(" "),a("p",[t._v("mapDispatchToProps也可简单地定义为对象，此时react-redux会自动dispatch其中value为action的内容，如遇addasync这种返回一个函数的，走异步action流程。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("mapStateToProps")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 映射状态")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mapDispatchToProps "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" creatIncrementAction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("subtract")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" creatDecrementAction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("addasync")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" creatIncrementAsyncAction\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 映射操作状态的方法")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mapStateToProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("mapDispatchToProps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CountUI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_4-6-2-provider"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-2-provider"}},[t._v("#")]),t._v(" 4.6.2 Provider ")]),t._v(" "),a("p",[t._v("有了Provier, App.jsx中靠props给容器组件Count传进去的store可以删去，也免去了未来有多个容器组件需要store的麻烦。直接在index.js中，为App组件包一个Provider。")]),t._v(" "),a("ul",[a("li",[t._v("Provider同时有store.subscribe的功能,因此subscribe也可删去。")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ReactDOM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"react-dom"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./App"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./redux/store"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),t._v("\n\nReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Provider store"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("store"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Provider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h3",{attrs:{id:"_4-6-3-一个组件要和redux-打交道-要经过哪几步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-3-一个组件要和redux-打交道-要经过哪几步"}},[t._v("#")]),t._v(" 4.6.3 一个组件要和redux“打交道”要经过哪几步 ")]),t._v(" "),a("ol",[a("li",[t._v("定义好UI组件——不暴露")]),t._v(" "),a("li",[t._v("引入connect生产一个容器组件，并暴露，写法如下：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 映射状态")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("xxxxxAction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 映射操作状态的方法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("UI")]),t._v("组件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("在UI组件中通过this.props.xxxxx读取和操作状态")]),t._v(" "),a("li",[t._v("容器组件和UI组件合二为一！")])]),t._v(" "),a("h2",{attrs:{id:"_4-7-数据共享版-reducer合并"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-7-数据共享版-reducer合并"}},[t._v("#")]),t._v(" 4.7 数据共享版，reducer合并")]),t._v(" "),a("p",[t._v("在store中对多个组件的reducer进行合并：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" countReducer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./reducers/count'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" personReducer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./reducers/person'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" combineReducers "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" allReducer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("combineReducers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sumUp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" countReducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 左边的key代表该reducer下处理并保存的state")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("personInfo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" personReducer\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("allReducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyMiddleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("thunk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-8-开发者工具redux-devtools-extension"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-8-开发者工具redux-devtools-extension"}},[t._v("#")]),t._v(" 4.8 开发者工具Redux DevTools Extension")]),t._v(" "),a("p",[t._v("通过chrome store下载，并npm：\nnpm install --save redux-devtools-extension")]),t._v(" "),a("p",[t._v("store.js引入并使用：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createStore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" applyMiddleware "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" composeWithDevTools "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux-devtools-extension'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reducer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("composeWithDevTools")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("applyMiddleware")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("middleware"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// other store enhancers if any")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-9-纯函数和高阶函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-9-纯函数和高阶函数"}},[t._v("#")]),t._v(" 4.9 纯函数和高阶函数")]),t._v(" "),a("h3",{attrs:{id:"_4-9-1-纯函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-9-1-纯函数"}},[t._v("#")]),t._v(" 4.9.1 纯函数 ")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("一类特别的函数：只要同样的输入（实参），必定得到同样的输出（返回）")])]),t._v(" "),a("li",[a("p",[t._v("必须遵守以下一些约束")]),t._v(" "),a("ul",[a("li",[t._v("不得改写参数数据")]),t._v(" "),a("li",[t._v("不会产生任何副作用，例如网络请求、输入和输出设备")]),t._v(" "),a("li",[t._v("不能调用Date.now()或者Math.random() 等不纯的方法")])])]),t._v(" "),a("li",[a("p",[t._v("redux的reducer函数必须是一个纯函数：\n！！！ 一定不要使用push\\unshift等改变原数据的API")])])]),t._v(" "),a("h3",{attrs:{id:"_4-9-2-高阶函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-9-2-高阶函数"}},[t._v("#")]),t._v(" 4.9.2 高阶函数 ")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("理解：一类特别的函数")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("情况1：参数是函数")])]),t._v(" "),a("li",[a("p",[t._v("情况2：返回的是函数")])])])]),t._v(" "),a("li",[a("p",[t._v("常见的高阶函数")]),t._v(" "),a("ol",[a("li",[t._v("定时器设置函数")]),t._v(" "),a("li",[t._v("数组的forEach() map() filter() reduce() find() bind()")]),t._v(" "),a("li",[t._v("promise")]),t._v(" "),a("li",[t._v("react-redux中的connect函数")])])]),t._v(" "),a("li",[a("p",[t._v("作用： 能实现更加动态，更加可扩展的功能")])])]),t._v(" "),a("h1",{attrs:{id:"第5章-react扩展知识及总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第5章-react扩展知识及总结"}},[t._v("#")]),t._v(" 第5章 React扩展知识及总结")]),t._v(" "),a("h2",{attrs:{id:"_5-1-setstate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-setstate"}},[t._v("#")]),t._v(" 5.1 setState")]),t._v(" "),a("p",[a("strong",[t._v("一、 setState()更新状态是异步还是同步的？")]),t._v("--\x3e 要看setState的执行位置\n（1）在【由react所控制的回调中】更新的动作是【异步】的：生命周期钩子、react事件监听回调\n（2）在【非react控制的异步回调中】更新的动作是【同步】的：定时器回调、原生事件回调、Promise")]),t._v(" "),a("p",[a("strong",[t._v("二、setState的两种写法：")]),t._v("\n（1）对象式写法：setState(stateChange,[callback])\n1.stateChange为状态改变对象（该对象可以体现出状态的更改）\n2.callback是可选的回调函数，它在状态更新完毕、界面也更新后（render调用后）才被调用。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'由React直接控制的add sum：'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("（2）函数式写法：setState(updater,[callback])\n1.updater为【返回stateChange对象】的函数。\n2.updater可以接收到state和props\n3.callback是可选的回调函数，它在状态更新、界面也更新后(render调用后)才被调用。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("总结：")])]),t._v(" "),a("ol",[a("li",[t._v("对象式的setState是函数式的setState的简写方式（语法糖）")]),t._v(" "),a("li",[t._v("使用原则：\n（1）如果新状态不依赖于原状态 ===> 使用对象方式\n（2）如果新状态依赖于原状态 ===> 使用函数方式\n（3）如果需要在setState()执行后获取最新的状态数据，要在第二个[callback]函数中读取")])]),t._v(" "),a("h2",{attrs:{id:"_5-2-lazyload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-lazyload"}},[t._v("#")]),t._v(" 5.2 LazyLoad")]),t._v(" "),a("p",[t._v("路由组件的lazyLoad，实现路由组件的分开打包：")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lazy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Suspense "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Home "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Home'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回值为import函数")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" About "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("lazy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./About'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("通过"),a("code",[t._v("<Suspense fallback={<Loading组件>}>")]),t._v("指定在加载得到打包文件前显示一个自定义的loading界面")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Suspense fallback"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Loading"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Switch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/about"')]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("About"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Route path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/home"')]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Switch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Suspense"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("h2",{attrs:{id:"_5-3-hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-hooks"}},[t._v("#")]),t._v(" 5.3 Hooks")]),t._v(" "),a("h3",{attrs:{id:"_5-3-1-hooks是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-hooks是什么"}},[t._v("#")]),t._v(" 5.3.1 Hooks是什么？ ")]),t._v(" "),a("ol",[a("li",[t._v("Hook是React 16.8.0版本增加的新特性/新语法")]),t._v(" "),a("li",[t._v("可以让你在【函数组件】中使用 state 以及 其它的 React 特性")])]),t._v(" "),a("h3",{attrs:{id:"_5-3-2-三个常用的hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-2-三个常用的hook"}},[t._v("#")]),t._v(" 5.3.2 三个常用的Hook ")]),t._v(" "),a("ol",[a("li",[t._v("State Hook： React.useState()")]),t._v(" "),a("li",[t._v("Effect Hook: React.useEffect()")]),t._v(" "),a("li",[t._v("Ref Hook: React.useRef()")])]),t._v(" "),a("h3",{attrs:{id:"_5-3-3-state-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-3-state-hook"}},[t._v("#")]),t._v(" 5.3.3 State Hook ")]),t._v(" "),a("ol",[a("li",[t._v("State Hook 让函数组件也可以有state状态，并进行状态数据的读写操作")]),t._v(" "),a("li",[t._v("语法： const [xxx, setXxx] = React.useState(initValue)")]),t._v(" "),a("li",[t._v("useState()说明：\n参数：第一次初始化的值在内部作缓存\n返回值：包含2个元素的数组，第1个为内部当前状态值，第2个为更新状态值的函数")]),t._v(" "),a("li",[t._v("setXxx()2种写法：\nsetXxx(newValue):参数为非函数值，直接指定新的状态值，内部用其覆盖原来的状态值\nsetXxx(value => newValue):参数为函数，接收原本的状态值，返回新的状态值，内部用其覆盖原来的状态值\n(第二种稳定性高)")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("sum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setSum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'老刘'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setSum(sum+3) // 以下情况写简写有问题")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("sum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" sum"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 完整版 稳定性更高")]),t._v("\n")])])]),a("h3",{attrs:{id:"_5-3-4-effect-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-4-effect-hook"}},[t._v("#")]),t._v(" 5.3.4 Effect Hook ")]),t._v(" "),a("ol",[a("li",[t._v("Effect Hook 可以让你在函数组件中执行副作用操作，用于模拟类式组件中的生命周期勾子")]),t._v(" "),a("li",[t._v("React中的副作用操作：\n发送Ajax请求数据获取\n设置订阅\n启动定时器")]),t._v(" "),a("li",[t._v("语法和说明：\ncomponentDidMount():")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  useEffect(()=>{\n    // 操作(仅在函数组件第一次调用后执行)\n  },[])\n")])])]),a("p",[t._v("componentDidUpdate():")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  1.不传第二个参数\n  useEffect(()=>{\n    // 状态更新后执行的操作\n  }) \n\n  或\n\n  2.传第二个参数，且指定监测对象\n  useEffect(()=>{\n    // 状态更新后执行的操作\n  },[stateValue])\n")])])]),a("p",[t._v("componentWillUnmount():")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("  useEffect(()=>{\n    // 操作\n    return ()=>{\n      // 收尾时的操作\n    }\n  },[])\n")])])]),a("h3",{attrs:{id:"_5-3-5-ref-hook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-5-ref-hook"}},[t._v("#")]),t._v(" 5.3.5 Ref Hook ")]),t._v(" "),a("ol",[a("li",[t._v("Ref Hook可以在函数组件中存储/查找组件内的标签或任意其它数据")]),t._v(" "),a("li",[t._v("语法：")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const xxx = useRef()\n")])])]),a("p",[t._v("用法与React.createRef()一模一样")]),t._v(" "),a("h2",{attrs:{id:"_5-4-fragment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-fragment"}},[t._v("#")]),t._v(" 5.4 Fragment")]),t._v(" "),a("ol",[a("li",[t._v("作用，避免无用的嵌套层级")]),t._v(" "),a("li",[t._v("使用\n引入：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Fragment"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n")])])]),a("p",[t._v("使用： "),a("code",[t._v("<Fragment></Fragment>或<></>")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Fragment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("456")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Fragment"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_5-5-context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-context"}},[t._v("#")]),t._v(" 5.5 Context")]),t._v(" "),a("ol",[a("li",[t._v("理解： 一种组件间的通信方式，常用于【祖组件】和【后代组件】间通信")]),t._v(" "),a("li",[t._v("使用：")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1. 创建Context容器对象：（一般单独建立一个context.js，在需要的组件引入）\n  const XXXContext = React.createContext()\n\n2. 渲染子组件时，外面包裹xxxContext.Provider,或提前将Provider解构赋值出来，通过value属性给后代组件传递数据：\n  <xxxContext.Provider value={数据}>\n    子组件\n  </xxxContext.Provider>\n\n3. 后代组件读取数据：\n\n  // 第一种方式：仅适用于类组件\n   static contextType = xxxContext // 声明接收context\n   const {} = this.context // 解构赋值，读取context中的value数据\n\n  // 第二种方式：函数组件与类组件都可以\n    const {Consumer} = xxxContext\n\n   export default function C() {\n      return( \n      <Consumer>\n        {\n          (value) => (\n            要显示的内容{value.xxx}\n          )\n        }\n      </Consumer>)\n    }\n\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("备注： 在开发中一般不用context，一般都用它封装react插件")])]),t._v(" "),a("h2",{attrs:{id:"_5-6-组件间通信方式总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-组件间通信方式总结"}},[t._v("#")]),t._v(" 5.6 组件间通信方式总结")]),t._v(" "),a("ul",[a("li",[a("p",[a("em",[a("strong",[t._v("组件间的关系")])])]),t._v(" "),a("ul",[a("li",[t._v("父子组件")]),t._v(" "),a("li",[t._v("兄弟组件（非嵌套组件）")]),t._v(" "),a("li",[t._v("祖孙组件（跨级组件）")]),t._v(" "),a("li",[t._v("其他关系")])])]),t._v(" "),a("li",[a("p",[a("em",[a("strong",[t._v("几种通信方式")])])]),t._v(" "),a("ol",[a("li",[t._v("props：最简单的方式")]),t._v(" "),a("li",[t._v("消息订阅-发布：pub-sub\\event")]),t._v(" "),a("li",[t._v("集中式管理: redux\\dva")]),t._v(" "),a("li",[t._v("context:生产者-消费者模式")])])]),t._v(" "),a("li",[a("p",[a("em",[a("strong",[t._v("比较好的搭配方式：")])])]),t._v(" "),a("ol",[a("li",[t._v("父子组件：props")]),t._v(" "),a("li",[t._v("兄弟组件：消息订阅、集中式管理")]),t._v(" "),a("li",[t._v("祖孙组件：消息订阅、集中式、context")]),t._v(" "),a("li",[t._v("其他关系：消息订阅、集中式")])])])])])}),[],!1,null,null,null);a.default=e.exports}}]);