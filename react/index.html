<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React全家桶（All-in-One） | chenxw的博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Just play">
    
    <link rel="preload" href="/assets/css/0.styles.99bb18d0.css" as="style"><link rel="preload" href="/assets/js/app.799e44f7.js" as="script"><link rel="preload" href="/assets/js/2.cad8c7e0.js" as="script"><link rel="preload" href="/assets/js/68.3af8b361.js" as="script"><link rel="prefetch" href="/assets/js/10.76466f72.js"><link rel="prefetch" href="/assets/js/100.e1db5d6f.js"><link rel="prefetch" href="/assets/js/101.1c028179.js"><link rel="prefetch" href="/assets/js/102.cc62f0d7.js"><link rel="prefetch" href="/assets/js/103.62141b8d.js"><link rel="prefetch" href="/assets/js/104.d7bc005b.js"><link rel="prefetch" href="/assets/js/105.54051aca.js"><link rel="prefetch" href="/assets/js/11.6cbfdcaf.js"><link rel="prefetch" href="/assets/js/12.3f339da5.js"><link rel="prefetch" href="/assets/js/13.3395887c.js"><link rel="prefetch" href="/assets/js/14.a86c2d1e.js"><link rel="prefetch" href="/assets/js/15.f57d1f9b.js"><link rel="prefetch" href="/assets/js/16.a2ab05e6.js"><link rel="prefetch" href="/assets/js/17.5e15c9b1.js"><link rel="prefetch" href="/assets/js/18.53f05be2.js"><link rel="prefetch" href="/assets/js/19.1980095c.js"><link rel="prefetch" href="/assets/js/20.95fc27fa.js"><link rel="prefetch" href="/assets/js/21.b9e1b608.js"><link rel="prefetch" href="/assets/js/22.0944c919.js"><link rel="prefetch" href="/assets/js/23.f7e4d0f3.js"><link rel="prefetch" href="/assets/js/24.b9f67e9b.js"><link rel="prefetch" href="/assets/js/25.3bdcbb64.js"><link rel="prefetch" href="/assets/js/26.6f10f312.js"><link rel="prefetch" href="/assets/js/27.f7d1eab8.js"><link rel="prefetch" href="/assets/js/28.f2b85f35.js"><link rel="prefetch" href="/assets/js/29.ceeb7446.js"><link rel="prefetch" href="/assets/js/3.45d24931.js"><link rel="prefetch" href="/assets/js/30.068dd465.js"><link rel="prefetch" href="/assets/js/31.2b0c9455.js"><link rel="prefetch" href="/assets/js/32.074da659.js"><link rel="prefetch" href="/assets/js/33.1a1d6eaa.js"><link rel="prefetch" href="/assets/js/34.dfbfbf21.js"><link rel="prefetch" href="/assets/js/35.3dd774d8.js"><link rel="prefetch" href="/assets/js/36.6771f9d3.js"><link rel="prefetch" href="/assets/js/37.6fc2bf95.js"><link rel="prefetch" href="/assets/js/38.e64b3205.js"><link rel="prefetch" href="/assets/js/39.e4bfc5e4.js"><link rel="prefetch" href="/assets/js/4.ad828115.js"><link rel="prefetch" href="/assets/js/40.29f03774.js"><link rel="prefetch" href="/assets/js/41.77bfd4f4.js"><link rel="prefetch" href="/assets/js/42.8852bc21.js"><link rel="prefetch" href="/assets/js/43.407f4f82.js"><link rel="prefetch" href="/assets/js/44.afd77677.js"><link rel="prefetch" href="/assets/js/45.29975a67.js"><link rel="prefetch" href="/assets/js/46.f2fa18dd.js"><link rel="prefetch" href="/assets/js/47.4a9a0146.js"><link rel="prefetch" href="/assets/js/48.a7a68e6d.js"><link rel="prefetch" href="/assets/js/49.0d2a0de3.js"><link rel="prefetch" href="/assets/js/5.2b30e605.js"><link rel="prefetch" href="/assets/js/50.5f0d1cfa.js"><link rel="prefetch" href="/assets/js/51.f98ff3a2.js"><link rel="prefetch" href="/assets/js/52.93228dc3.js"><link rel="prefetch" href="/assets/js/53.2ef887f3.js"><link rel="prefetch" href="/assets/js/54.2e299a96.js"><link rel="prefetch" href="/assets/js/55.3c659e48.js"><link rel="prefetch" href="/assets/js/56.9072fc30.js"><link rel="prefetch" href="/assets/js/57.31db0b7d.js"><link rel="prefetch" href="/assets/js/58.5ddfbcf3.js"><link rel="prefetch" href="/assets/js/59.ea0bf83b.js"><link rel="prefetch" href="/assets/js/6.8e9a43d5.js"><link rel="prefetch" href="/assets/js/60.acd55b62.js"><link rel="prefetch" href="/assets/js/61.0af08a14.js"><link rel="prefetch" href="/assets/js/62.de522d59.js"><link rel="prefetch" href="/assets/js/63.02d968fc.js"><link rel="prefetch" href="/assets/js/64.e2aff8f7.js"><link rel="prefetch" href="/assets/js/65.c6097f6e.js"><link rel="prefetch" href="/assets/js/66.3e992aa2.js"><link rel="prefetch" href="/assets/js/67.f1cda475.js"><link rel="prefetch" href="/assets/js/69.acebd16c.js"><link rel="prefetch" href="/assets/js/7.5957e052.js"><link rel="prefetch" href="/assets/js/70.0d969c00.js"><link rel="prefetch" href="/assets/js/71.a02017b1.js"><link rel="prefetch" href="/assets/js/72.7b6352d3.js"><link rel="prefetch" href="/assets/js/73.9d8c23a0.js"><link rel="prefetch" href="/assets/js/74.9f776711.js"><link rel="prefetch" href="/assets/js/75.a5510a49.js"><link rel="prefetch" href="/assets/js/76.216aec45.js"><link rel="prefetch" href="/assets/js/77.4db32a90.js"><link rel="prefetch" href="/assets/js/78.f442e91c.js"><link rel="prefetch" href="/assets/js/79.c02ad2a6.js"><link rel="prefetch" href="/assets/js/8.16ee157f.js"><link rel="prefetch" href="/assets/js/80.be89d6aa.js"><link rel="prefetch" href="/assets/js/81.5ab20fd3.js"><link rel="prefetch" href="/assets/js/82.6489585e.js"><link rel="prefetch" href="/assets/js/83.21bcce32.js"><link rel="prefetch" href="/assets/js/84.69e37675.js"><link rel="prefetch" href="/assets/js/85.50c8639d.js"><link rel="prefetch" href="/assets/js/86.520816af.js"><link rel="prefetch" href="/assets/js/87.9caa901c.js"><link rel="prefetch" href="/assets/js/88.92979864.js"><link rel="prefetch" href="/assets/js/89.a980c96c.js"><link rel="prefetch" href="/assets/js/9.ee0e1366.js"><link rel="prefetch" href="/assets/js/90.025c43bb.js"><link rel="prefetch" href="/assets/js/91.118b57ab.js"><link rel="prefetch" href="/assets/js/92.9fcd6e3b.js"><link rel="prefetch" href="/assets/js/93.8dc70c9f.js"><link rel="prefetch" href="/assets/js/94.6a2e21e4.js"><link rel="prefetch" href="/assets/js/95.87101310.js"><link rel="prefetch" href="/assets/js/96.08b25db3.js"><link rel="prefetch" href="/assets/js/97.9e789da5.js"><link rel="prefetch" href="/assets/js/98.6577f388.js"><link rel="prefetch" href="/assets/js/99.1361226b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.99bb18d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.svg" alt="chenxw的博客" class="logo"> <span class="site-name can-hide">chenxw的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/01-前端简介.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/promise/" class="nav-link">
  Promise
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级" class="dropdown-title"><span class="title">高级</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级" class="mobile-dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow down"></span></button> <button type="button" aria-label="实战" class="mobile-dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepro/" class="nav-link">
  Vue实战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bruce/notes/h5c3/css.html" class="nav-link">
  HTML&amp;CSS
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/js/what_is_js.html" class="nav-link">
  Javascript
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/less/less.html" class="nav-link">
  Less
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bruce/notes/vue/vue核心基础.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/react/react-basic.html" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bruce/notes/git/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/nodejs/node.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/webpack/webpack基础.html" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/ide/vscode.html" class="nav-link">
  vscode
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/ryanchenxw" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/01-前端简介.html" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/promise/" class="nav-link">
  Promise
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高级" class="dropdown-title"><span class="title">高级</span> <span class="arrow down"></span></button> <button type="button" aria-label="高级" class="mobile-dropdown-title"><span class="title">高级</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/react/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  React
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实战" class="dropdown-title"><span class="title">实战</span> <span class="arrow down"></span></button> <button type="button" aria-label="实战" class="mobile-dropdown-title"><span class="title">实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepro/" class="nav-link">
  Vue实战
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端学习" class="mobile-dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bruce/notes/h5c3/css.html" class="nav-link">
  HTML&amp;CSS
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/js/what_is_js.html" class="nav-link">
  Javascript
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/less/less.html" class="nav-link">
  Less
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bruce/notes/vue/vue核心基础.html" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/react/react-basic.html" class="nav-link">
  React
</a></li></ul></li><li class="dropdown-item"><h4>
          其它
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/bruce/notes/git/git.html" class="nav-link">
  Git
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/nodejs/node.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/webpack/webpack基础.html" class="nav-link">
  webpack
</a></li><li class="dropdown-subitem"><a href="/bruce/notes/ide/vscode.html" class="nav-link">
  vscode
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://gitee.com/ryanchenxw" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/react/" aria-current="page" class="active sidebar-link">React全家桶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react/#_1-1-react" class="sidebar-link">1.1 React</a></li><li class="sidebar-sub-header"><a href="/react/#_1-2-模块与组件、模块化与组件化的理解" class="sidebar-link">1.2 模块与组件、模块化与组件化的理解</a></li><li class="sidebar-sub-header"><a href="/react/#_1-3-react应用-基于react脚手架" class="sidebar-link">1.3 React应用（基于React脚手架）</a></li><li class="sidebar-sub-header"><a href="/react/#_2-1-学习笔记" class="sidebar-link">2.1 学习笔记</a></li><li class="sidebar-sub-header"><a href="/react/#_2-2-功能界面的组件化编码流程" class="sidebar-link">2.2 功能界面的组件化编码流程</a></li><li class="sidebar-sub-header"><a href="/react/#_2-3-react-脚手架配置代理总结" class="sidebar-link">2.3 react 脚手架配置代理总结</a></li><li class="sidebar-sub-header"><a href="/react/#_2-4-github搜索案例" class="sidebar-link">2.4 GitHub搜索案例</a></li><li class="sidebar-sub-header"><a href="/react/#_2-5-消息订阅与发布" class="sidebar-link">2.5 消息订阅与发布</a></li><li class="sidebar-sub-header"><a href="/react/#_3-1-相关理解" class="sidebar-link">3.1 相关理解</a></li><li class="sidebar-sub-header"><a href="/react/#_3-2-路由的基本使用" class="sidebar-link">3.2 路由的基本使用</a></li><li class="sidebar-sub-header"><a href="/react/#_3-3-路由组件与一般组件" class="sidebar-link">3.3 路由组件与一般组件</a></li><li class="sidebar-sub-header"><a href="/react/#_3-4-navlink的使用" class="sidebar-link">3.4 NavLink的使用</a></li><li class="sidebar-sub-header"><a href="/react/#_3-5-switch的使用" class="sidebar-link">3.5 Switch的使用</a></li><li class="sidebar-sub-header"><a href="/react/#_3-6-解决样式丢失的问题" class="sidebar-link">3.6 解决样式丢失的问题</a></li><li class="sidebar-sub-header"><a href="/react/#_3-7-路由的模糊匹配和严格匹配" class="sidebar-link">3.7 路由的模糊匹配和严格匹配</a></li><li class="sidebar-sub-header"><a href="/react/#_3-8-redirect的使用" class="sidebar-link">3.8 Redirect的使用</a></li><li class="sidebar-sub-header"><a href="/react/#_3-9-嵌套路由" class="sidebar-link">3.9 嵌套路由</a></li><li class="sidebar-sub-header"><a href="/react/#_3-10-给路由组件传递参数" class="sidebar-link">3.10 给路由组件传递参数</a></li><li class="sidebar-sub-header"><a href="/react/#_3-11-replace与push" class="sidebar-link">3.11 replace与push</a></li><li class="sidebar-sub-header"><a href="/react/#_3-12-编程式路由导航" class="sidebar-link">3.12 编程式路由导航</a></li><li class="sidebar-sub-header"><a href="/react/#_3-13-withrouter" class="sidebar-link">3.13 withRouter()</a></li><li class="sidebar-sub-header"><a href="/react/#_3-14-browserrouter与hashrouter的区别" class="sidebar-link">3.14 BrowserRouter与HashRouter的区别</a></li><li class="sidebar-sub-header"><a href="/react/#_4-1-redux简介" class="sidebar-link">4.1  redux简介</a></li><li class="sidebar-sub-header"><a href="/react/#_4-2-求和案例-redux迷你版" class="sidebar-link">4.2  求和案例 redux迷你版</a></li><li class="sidebar-sub-header"><a href="/react/#_4-3-求和案例-redux完整版" class="sidebar-link">4.3  求和案例 redux完整版</a></li><li class="sidebar-sub-header"><a href="/react/#_4-4-异步action" class="sidebar-link">4.4 异步action</a></li><li class="sidebar-sub-header"><a href="/react/#_4-5-react-redux的基本使用" class="sidebar-link">4.5  react-redux的基本使用</a></li><li class="sidebar-sub-header"><a href="/react/#_4-6-优化" class="sidebar-link">4.6 优化</a></li><li class="sidebar-sub-header"><a href="/react/#_4-7-数据共享版-reducer合并" class="sidebar-link">4.7 数据共享版，reducer合并</a></li><li class="sidebar-sub-header"><a href="/react/#_4-8-开发者工具redux-devtools-extension" class="sidebar-link">4.8 开发者工具Redux DevTools Extension</a></li><li class="sidebar-sub-header"><a href="/react/#_4-9-纯函数和高阶函数" class="sidebar-link">4.9 纯函数和高阶函数</a></li><li class="sidebar-sub-header"><a href="/react/#_5-1-setstate" class="sidebar-link">5.1 setState</a></li><li class="sidebar-sub-header"><a href="/react/#_5-2-lazyload" class="sidebar-link">5.2 LazyLoad</a></li><li class="sidebar-sub-header"><a href="/react/#_5-3-hooks" class="sidebar-link">5.3 Hooks</a></li><li class="sidebar-sub-header"><a href="/react/#_5-4-fragment" class="sidebar-link">5.4 Fragment</a></li><li class="sidebar-sub-header"><a href="/react/#_5-5-context" class="sidebar-link">5.5 Context</a></li><li class="sidebar-sub-header"><a href="/react/#_5-6-组件间通信方式总结" class="sidebar-link">5.6 组件间通信方式总结</a></li></ul></li><li><a href="/react/移动端开发相关.html" class="sidebar-link">移动端开发相关</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react全家桶-all-in-one"><a href="#react全家桶-all-in-one" class="header-anchor">#</a> React全家桶（All-in-One） </h1> <p>本仓库内容根据哔哩哔哩 <a href="https://www.bilibili.com/video/BV1Ey4y1u7vi?share_source=copy_web" target="_blank" rel="noopener noreferrer">《2021版React技术全家桶》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和 <a href="https://www.bilibili.com/video/BV1wy4y1D7JT?p=74&amp;share_source=copy_web" target="_blank" rel="noopener noreferrer">《2020版React技术全家桶》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 视频整理的学习笔记，视频教程讲的特别好，配合本仓库的代码测试环境来练习，学习效果更佳，欢迎朋友们 Star 和 Fork。</p> <p>（课程涉及的移动端开发请移步 =&gt; <a href="https://github.com/Hengyu-DU/Mobile-Development" target="_blank" rel="noopener noreferrer">移动端开发核心要点<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</p> <p>根据React基础部分知识，整理了一份3页的cheat sheet（小抄），便于快速查阅和复习遗忘的知识：
<img src="/React%E5%9F%BA%E7%A1%80%E9%80%9F%E6%9F%A5%E8%A1%A8/react.png" alt="React基础知识速查表（预览）"></p> <p><strong>React基础知识速查表，pdf版（共3页，<a href="https://github.com/Hengyu-DU/React-All-in-One/tree/master/React%E5%9F%BA%E7%A1%80%E9%80%9F%E6%9F%A5%E8%A1%A8" target="_blank" rel="noopener noreferrer">点击下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</strong></p> <h1 id="文档目录"><a href="#文档目录" class="header-anchor">#</a> 文档目录 </h1> <ul><li><a href="#%E7%AC%AC1%E7%AB%A0-react%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8">第1章 React基础使用</a></li> <li><a href="#%E7%AC%AC2%E7%AB%A0-react%E7%BB%84%E4%BB%B6%E5%BC%8F%E5%BC%80%E5%8F%91%E5%BA%94%E7%94%A8">第2章 React组件式开发应用</a></li> <li><a href="#%E7%AC%AC3%E7%AB%A0-react%E8%B7%AF%E7%94%B1">第3章 React路由</a></li> <li><a href="#%E7%AC%AC4%E7%AB%A0-redux">第4章 Redux</a></li> <li><a href="#%E7%AC%AC5%E7%AB%A0-react%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86%E5%8F%8A%E6%80%BB%E7%BB%93">第5章 React扩展知识及总结</a></li></ul> <h1 id="第1章-react基础使用"><a href="#第1章-react基础使用" class="header-anchor">#</a> 第1章 React基础使用</h1> <p>基本语法部分参见React基础知识速查表（共3页，<a href="https://github.com/Hengyu-DU/React-All-in-One/tree/master/React%E5%9F%BA%E7%A1%80%E9%80%9F%E6%9F%A5%E8%A1%A8" target="_blank" rel="noopener noreferrer">点击下载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）：</p> <h2 id="_1-1-react"><a href="#_1-1-react" class="header-anchor">#</a> 1.1 React</h2> <ol><li>用于动态构建用户界面的JavaScript库（只关注于试图）</li> <li>由Facebook开源</li></ol> <ul><li><p><strong>React的特点</strong></p> <ol><li>声明式编码</li> <li>组件化编码</li> <li>React Native 编写原生应用</li> <li>高效（优秀的Diffing算法）</li></ol></li> <li><p><strong>React高效的原因</strong></p> <ol><li>使用虚拟DOM，不总是直接操作页面真实的DOM</li> <li>DOM Diffing算法，最小化页面重绘</li></ol></li></ul> <h2 id="_1-2-模块与组件、模块化与组件化的理解"><a href="#_1-2-模块与组件、模块化与组件化的理解" class="header-anchor">#</a> 1.2 模块与组件、模块化与组件化的理解</h2> <ul><li><p>模块：复用js</p></li> <li><p>组件：用来实现局部功能效果的代码和资源的集合（html/css/js/image等），可以复用编码、简化、提高运行效率</p></li> <li><p><strong>定义组件的方式</strong></p> <ol><li>使用函数定义组件 （补救措施加上，目前官方推荐）</li> <li>使用类定义组件 （最完整的功能）</li></ol></li></ul> <h2 id="_1-3-react应用-基于react脚手架"><a href="#_1-3-react应用-基于react脚手架" class="header-anchor">#</a> 1.3 React应用（基于React脚手架）</h2> <ul><li><p><strong>React脚手架</strong></p> <ol><li><p>xxx 脚手架：用来帮助程序员快速创建一个基于xxx库的模板项目</p> <ul><li>包含了所有需要的配置（语法检查、jsx编译、devServer）</li> <li>下载好了所有相关的依赖</li> <li>可以直接运行一个简单的效果</li></ul></li> <li><p>react提供了一个用于创建react项目的脚手架库： creat-react-app</p></li> <li><p>项目的整体技术架构为： react + webpack + es6 + eslint</p></li> <li><p>使用脚手架开发的项目特点： 模块化、组件化、工程化</p></li></ol></li> <li><p><strong>创建项目并启动</strong>
第一步，全局安装 npm i -g create-react-app
第二步，切换到想创项目的目录，使用命令 create-react-app hello-react
第三步，进入项目文件夹 cd hello-react
第四步，启动项目 npm start</p></li></ul> <h1 id="第2章-react组件式开发应用"><a href="#第2章-react组件式开发应用" class="header-anchor">#</a> 第2章 React组件式开发应用</h1> <h2 id="_2-1-学习笔记"><a href="#_2-1-学习笔记" class="header-anchor">#</a> 2.1 学习笔记</h2> <ul><li>IOS\Android应用开发方式：</li></ul> <ol><li>原生开发（OC\JAVA）</li> <li>经过翻译生成原生应用（ReactNative\uniapp）</li> <li>加壳</li></ol> <ul><li>输入‘rcc’可快速输入：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-2-功能界面的组件化编码流程"><a href="#_2-2-功能界面的组件化编码流程" class="header-anchor">#</a> 2.2 功能界面的组件化编码流程</h2> <h3 id="_2-2-1-通用流程"><a href="#_2-2-1-通用流程" class="header-anchor">#</a> 2.2.1 通用流程  </h3> <ol><li>拆分组件：根据功能点划分组件。</li> <li>实现静态组件：使用组件实现静态页面效果</li> <li>实现动态组件
3.1 动态显示初始化数据
3.1.1 数据类型
3.1.2 数据名称
3.1.3 保存在哪个组件
- 某个组件用：放在自身
- 某些组件用：放在共同父组件中 ==&gt; 状态提升
3.2 交互（从绑定事件监听开始）</li></ol> <ul><li>状态在哪里，操作状态的方法就在哪里</li></ul> <h3 id="_2-2-2-关于父子之间通信"><a href="#_2-2-2-关于父子之间通信" class="header-anchor">#</a> 2.2.2 关于父子之间通信 </h3> <ol><li>【父组件】给【子组件】传递数据：通过props传递</li> <li>【子组件】给【父组件】传递数据：通过props传递，要求父提前给子传递一个有形参的函数</li></ol> <h3 id="_2-2-3-关于check框"><a href="#_2-2-3-关于check框" class="header-anchor">#</a> 2.2.3 关于check框 </h3> <ul><li><p>checked:</p> <ul><li>不仅仅展示勾选的状态，后期还需要响应勾选的动作</li> <li>注意：用了checked就必须配合onChange使用；</li></ul></li> <li><p>defaultChecked：</p> <ul><li>只在第一次渲染时起作用，仅初次展示勾选状态，后期不会通过状态改变再次渲染。</li></ul></li> <li><p>value和defaultValue也是同理的。</p></li></ul> <h3 id="_2-2-4-关于uuid-universally-unique-identifier"><a href="#_2-2-4-关于uuid-universally-unique-identifier" class="header-anchor">#</a> 2.2.4 关于uuid (Universally Unique Identifier) </h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code>$ npm i uuid
</code></pre></div><p>使用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> v4 <span class="token keyword">as</span> uuidv4 <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'uuid'</span><span class="token punctuation">;</span>
<span class="token function">uuidv4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ⇨ '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'</span>
</code></pre></div><h2 id="_2-3-react-脚手架配置代理总结"><a href="#_2-3-react-脚手架配置代理总结" class="header-anchor">#</a> 2.3 react 脚手架配置代理总结</h2> <ul><li><p><em><strong>方法一：</strong></em></p> <p>在package.json中追加如下配置（端口号是目标服务器的端口号）：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;proxy&quot;</span><span class="token operator">:</span><span class="token string">&quot;http://localhost:5000&quot;</span>
</code></pre></div><p>请求的地址改为本地地址+目标后缀</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">'http://localhost:3000/students'</span><span class="token punctuation">,</span>
<span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">'GET'</span>
</code></pre></div><p>说明：</p> <ol><li>优点：配置简单，前端请求资源时可以不加任何前缀</li> <li>缺点：不能配置多个代理。</li> <li>工作方式：上述方式配置代理，当用Ajax请求了3000不存在的资源时，该请求会转发给5000（如果3000存在资源，则优先匹配前端资源，localhost:3000 即是public路径）</li></ol></li> <li><p><em><strong>方法二：</strong></em></p> <p>安装http-proxy-middleware,
编写setupProxy.js配置具体代理规则：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>createProxyMiddleware<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http-proxy-middleware'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
    <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span> 
      <span class="token string">'/api1'</span><span class="token punctuation">,</span> <span class="token comment">// 只要/api 开头的请求，才转发给后端服务器</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span><span class="token string">'http://localhost:5000'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 控制服务器接收到的请求头中host字段的值</span>
          <span class="token comment">// false(默认值)：服务器请求来自于原地址 localhost:3000</span>
          <span class="token comment">// true：服务器请求来自于5000（请求目标地址），可迷惑目标服务器</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">'^/api1'</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span> <span class="token comment">// 重写路径（目的：去掉api前缀）</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">createProxyMiddleware</span><span class="token punctuation">(</span> 
      <span class="token string">'/api2'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span><span class="token string">'http://localhost:5001'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> 
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">'^/api2'</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span> 
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="_2-4-github搜索案例"><a href="#_2-4-github搜索案例" class="header-anchor">#</a> 2.4 GitHub搜索案例</h2> <ul><li><p>列表展示页面需要暗藏几个元素：</p> <ol><li>welcome</li> <li>loading...</li> <li>users(内容展示)</li> <li>error</li></ol></li> <li><p>注意：通过response返回的error是一个对象，错误信息在下面的error.message</p></li></ul> <h2 id="_2-5-消息订阅与发布"><a href="#_2-5-消息订阅与发布" class="header-anchor">#</a> 2.5 消息订阅与发布</h2> <ul><li><p>pubsub-js
npm install pubsub-js</p></li> <li><p>先订阅，再发布</p></li> <li><p>适用于任意组件间的通信</p></li> <li><p>要在组件componentWillUnmount中取消订阅</p></li></ul> <div class="language- extra-class"><pre class="language-text"><code>PubSub.publish('status',data)
this.msgis = PubSub.subscribe('status',函数(_,data))
PubSub.unsubscribe(this.msgid) // 取消订阅
</code></pre></div><h1 id="第3章-react路由"><a href="#第3章-react路由" class="header-anchor">#</a> 第3章 React路由</h1> <h2 id="_3-1-相关理解"><a href="#_3-1-相关理解" class="header-anchor">#</a> 3.1 相关理解</h2> <ul><li><p><em><strong>SPA</strong></em></p> <ol><li>单页Web应用（Single Page Web Application SPA）</li> <li>整个应用只有<strong>一个完整的页面</strong></li> <li>点击页面中的链接<strong>不会刷新</strong>页面，只会做页面的<strong>局部更新</strong></li> <li>数据都需要通过ajax请求获取，并在前端异步展现</li></ol></li> <li><p><em><strong>路由</strong></em></p> <ol><li>什么是路由？
<ol><li>一个路由就是一个映射关系（key:value）</li> <li>key为路径，value可能是function或component</li></ol></li> <li>路由分类
<ol><li>后端路由：
<ul><li>理解： value 是 function, 用来处理客户端提交的请求。</li> <li>注册路由：<code>router.get(path, function(req, res))</code></li> <li>工作过程：当node接收到一个请求时，根据请求路径找到匹配的路由，调用路由中的函数来处理请求，返回响应数据。</li></ul></li> <li>前端路由：
<ul><li>浏览器端路由，value是component，用于展示页面内容</li> <li>注册路由：<code>&lt;Route path=&quot;/test&quot; component={Test}&gt;</code></li> <li>工作过程：当浏览器的path变成/test时，当前路由组件就会变成Test组件</li></ul></li></ol></li></ol></li> <li><p><em><strong>React-router（-DOM） 的理解</strong></em></p> <ol><li>react 的一个插件库
<ul><li>一共有三个库 web\native\anywhere</li></ul></li> <li>专门用来实现一个SPA应用</li> <li>基于react的web项目基本都会用到这个库。</li></ol></li></ul> <h2 id="_3-2-路由的基本使用"><a href="#_3-2-路由的基本使用" class="header-anchor">#</a> 3.2 路由的基本使用</h2> <ol><li>明确好界面中的导航区、展示区</li> <li>导航区的a标签改为link标签 =&gt; 编写路由链接
<code>&lt;Link to=&quot;/abc&quot;&gt;Demo&lt;/Link&gt;</code></li> <li>展示区写Route标签进行路径的匹配 =&gt; 注册路由
<code>&lt;Route path='/abc' component={Demo}/&gt;</code></li> <li><code>\&lt;App&gt;</code> 的最外侧包裹了一个<code>&lt;BrowserRouter&gt;</code>或<code>&lt;HashRouter&gt;</code></li></ol> <h2 id="_3-3-路由组件与一般组件"><a href="#_3-3-路由组件与一般组件" class="header-anchor">#</a> 3.3 路由组件与一般组件</h2> <ol><li><p>写法不同：</p> <ul><li>一般组件：<code>&lt;Demo/&gt;</code></li> <li>路由组件：<code>&lt;Route path='/demo' component={Demo}/&gt;</code></li></ul></li> <li><p>存放位置不同：</p> <ul><li>一般组件：components</li> <li>路由组件：pages</li></ul></li> <li><p>接收到的props不同：</p> <ul><li>一般组件：写组件标签时传递了什么，就能收到什么</li> <li>路由组件：接收到三个固定的属性：</li></ul> <div class="language- extra-class"><pre class="language-text"><code>history:
    go: ƒ go(n)
    goBack: ƒ goBack()
    goForward: ƒ goForward()
    push: ƒ push(path, state)
    replace: ƒ replace(path, state)
location:
    pathname: &quot;/about&quot;
    search: &quot;&quot;
    state: undefined
match:
    params: {}
    path: &quot;/about&quot;
    url: &quot;/about&quot;
</code></pre></div></li></ol> <h2 id="_3-4-navlink的使用"><a href="#_3-4-navlink的使用" class="header-anchor">#</a> 3.4 NavLink的使用</h2> <h3 id="_3-4-1-基本使用"><a href="#_3-4-1-基本使用" class="header-anchor">#</a> 3.4.1 基本使用 </h3> <p>首先引入：
import {NavLink} from 'react-router-dom'</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">activeClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>atguigu<span class="token punctuation">'</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>list-group-item<span class="token punctuation">'</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">About</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">activeClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>atguigu<span class="token punctuation">'</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>list-group-item<span class="token punctuation">'</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">NavLink</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>activeClassName属性用来指定active状态下的类名，默认叫active</li> <li>样式如果被bootstrap覆盖，则加 !important ：</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.atguigu</span><span class="token punctuation">{</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> cornflowerblue <span class="token important">!important</span><span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> darkblue <span class="token important">!important</span><span class="token punctuation">;</span>
        <span class="token property">font-weight</span><span class="token punctuation">:</span> bold <span class="token important">!important</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-2-封装navlink"><a href="#_3-4-2-封装navlink" class="header-anchor">#</a> 3.4.2 封装NavLink </h3> <p>封装一个MyNavLink：</p> <ol><li>index.js 中引入 NavLink</li></ol> <div class="language-jsx extra-class"><pre class="language-jsx"><code>  <span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span> NavLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyNavLink</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">NavLink</span></span> <span class="token attr-name">activeClassName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>atguigu<span class="token punctuation">'</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>list-group-item<span class="token punctuation">'</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>{...this.props} 作为一个对象展开，其中包括children属性（标签体的内容，this.props.children）</li></ul> <ol start="2"><li>App.jsx 中：
只需将不同的部份以props的形式传入，即可完成封装组件的调用。</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token operator">&lt;</span>MyNavLink to<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>MyNavLink to<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_3-5-switch的使用"><a href="#_3-5-switch的使用" class="header-anchor">#</a> 3.5 Switch的使用</h2> <p>用于解决路由单一匹配的效率问题，在相同路由下只会匹配一次。
引入Switch：
import {Switch, Route} from 'react-router-dom'</p> <p>用<code>&lt;Switch&gt;</code>标签包裹注册的路由：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code>  <span class="token punctuation">{</span><span class="token comment">/* 注册路由 */</span><span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Test<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_3-6-解决样式丢失的问题"><a href="#_3-6-解决样式丢失的问题" class="header-anchor">#</a> 3.6 解决样式丢失的问题</h2> <p>在路由地址添加多级路径时，二次刷新网页会导致样式丢失，
解决方法一：
public/index.html中css引入时，去掉绝对地址的./，直接用/
解决方法二：
public/index.html中css引入时，绝对路径以：  %PUBLIC_URL%   开头，代表public文件夹
解决方法三：（不常用）
index.js中引入{HashRouter},而非{BrowserRouter}.</p> <h2 id="_3-7-路由的模糊匹配和严格匹配"><a href="#_3-7-路由的模糊匹配和严格匹配" class="header-anchor">#</a> 3.7 路由的模糊匹配和严格匹配</h2> <ul><li>模糊匹配：
只要to输入的路径与目标路径开头一致（包含目标路径），后面再接不同的也算匹配</li> <li>严格匹配：
必须完全一致</li></ul> <p>除非页面出现问题，否则不轻易开启严格匹配，因为有时开启会导致无法匹配二级路由。
开启严格匹配的方法：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span><span class="token comment">/* 注册路由 */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route exact<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route exact<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
</code></pre></div><p>(仅写exact也是可以的)</p> <h2 id="_3-8-redirect的使用"><a href="#_3-8-redirect的使用" class="header-anchor">#</a> 3.8 Redirect的使用</h2> <ol><li>一般写在所有路由注册的最下方，switch之内，当所有路由都无法匹配时，跳转到Redirect指定的路由。</li> <li>具体编码：
引入：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Switch<span class="token punctuation">,</span> Route<span class="token punctuation">,</span> Redirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
</code></pre></div><p>使用：</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Route</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">component</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Redirect</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Switch</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_3-9-嵌套路由"><a href="#_3-9-嵌套路由" class="header-anchor">#</a> 3.9 嵌套路由</h2> <ol><li>注册子路由时要写上父路由的path值</li> <li>路由的匹配是按照注册路由的顺序进行的</li></ol> <h2 id="_3-10-给路由组件传递参数"><a href="#_3-10-给路由组件传递参数" class="header-anchor">#</a> 3.10 给路由组件传递参数</h2> <ul><li>*Ajax传递参数的方法：
<ol><li>query</li> <li>params</li> <li>body(包括
urlencoded =&gt; key=value&amp;key=value
json)</li></ol></li></ul> <ul><li><p><em><strong>(1) params参数(props.match.params)</strong></em></p> <ul><li>路由链接（携带参数）：<code>&lt;Link to='/demo/test/tom/18'&gt;详情&lt;/Link&gt;</code></li> <li>注册路由（声明接收）: <code>&lt;Route path=&quot;/demo/test/:name/:age&quot; component={Test}/&gt;</code></li> <li>接收参数： const {name, age} = this.props.match.params</li></ul></li> <li><p><em><strong>(2) search参数(props.location.search)</strong></em></p> <ul><li>路由链接（携带参数）：<code>&lt;Link to='/demo/test?name=to&amp;age=18'&gt;详情&lt;/Link&gt;</code></li> <li>注册路由（无需声明，正常注册即可）：<code>&lt;Route path='/demo/test' component={Test}/&gt;</code></li> <li>接收参数：const {search} = this.props.location</li> <li>备注：获取到的search是urlencoded编码字符串，需要借助querystring解析</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'querystring'</span>  

qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">'18'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// 结果为   name=A&amp;age=18</span>
qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'name=A&amp;age=18'</span><span class="token punctuation">)</span> <span class="token comment">// 结果为  {name:'A',age:'18'}</span>
</code></pre></div></li> <li><p><em><strong>(3) state参数(props.location.state)</strong></em></p> <ul><li>路由链接（携带参数）：
</li> <li>注册路由（无需声明，正常注册即可）：<code>&lt;Route path='/demo/test' component={Test}/&gt;</code></li> <li>接收参数：const {state} = this.props.location</li> <li>备注：刷新也可保留住参数！！！（删除浏览器缓存和历史记录后则会失效）</li></ul></li></ul> <h2 id="_3-11-replace与push"><a href="#_3-11-replace与push" class="header-anchor">#</a> 3.11 replace与push</h2> <p>如果开启了replace模式，则新点击的路由组件会替换栈顶的历史记录，将不可以回退。
开启方式：在路由组件中加 replace={true} 或 直接 replace</p> <div class="language-js extra-class"><pre class="language-js"><code>      <span class="token operator">&lt;</span>MyNavLink replace to<span class="token operator">=</span><span class="token string">&quot;/home/message&quot;</span><span class="token operator">&gt;</span>Message<span class="token operator">&lt;</span><span class="token operator">/</span>MyNavLink<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_3-12-编程式路由导航"><a href="#_3-12-编程式路由导航" class="header-anchor">#</a> 3.12 编程式路由导航</h2> <p>借助this.props.history对象上的API对操作路由跳转、前进、后退</p> <ul><li>this.props.history.push(path[,state])</li> <li>this.props.history.replace(path[,state])</li> <li>this.props.history.goBack()</li> <li>this.props.history.goForward()</li> <li>this.props.history.go(n)</li></ul> <h2 id="_3-13-withrouter"><a href="#_3-13-withrouter" class="header-anchor">#</a> 3.13 withRouter()</h2> <p>withRouter函数可以加工一般组件，让一般组件具备路由组件所特有的API，其返回值是一个新组件
引入：</p> <div class="language- extra-class"><pre class="language-text"><code>import {withRouter} from 'react-router-dom'
</code></pre></div><p>在需要加工的一般组件内使用：</p> <div class="language- extra-class"><pre class="language-text"><code>export default withRouter(Header)
</code></pre></div><h2 id="_3-14-browserrouter与hashrouter的区别"><a href="#_3-14-browserrouter与hashrouter的区别" class="header-anchor">#</a> 3.14 BrowserRouter与HashRouter的区别</h2> <div class="language- extra-class"><pre><code>1. 底层原理不一样：

- BrowserRouter使用的是H5的history API，不兼容IE9及以下版本。
- HashRouter使用的是URL的哈希值

2. path表现形式不一样

- BrowserRouter的路径中没有#
- HashRouter的路径包含#

3. 刷新对路由state参数的影响

- （1）BrowserRouter无影响，因为state保存在history对象中
- （2）HashRouter刷新后会导致路由state参数的丢失！！！

4. 备注：HashRouter可以用于解决一些路径错误相关的问题。
</code></pre></div><h1 id="第4章-redux"><a href="#第4章-redux" class="header-anchor">#</a> 第4章 Redux</h1> <h2 id="_4-1-redux简介"><a href="#_4-1-redux简介" class="header-anchor">#</a> 4.1  redux简介</h2> <p><strong>1. redux是什么？</strong></p> <ol><li>redux是一个专门用于做<strong>状态管理</strong>的JS库（不是react插件库）</li> <li>基本与react配合使用</li> <li>作用：集中式管理react应用中多个组件<strong>共享的state状态</strong></li></ol> <p><strong>2. 工作流程</strong></p> <p>​	<img src="C:/Users/victo/Desktop/source/Q  React/4-Redux/原理图/redux原理图.png" style="zoom:33%;"></p> <ul><li><p>需要创建的文件：</p> <div class="language- extra-class"><pre class="language-text"><code>    components
    redux
      |- action.js
      |- reducer.js
      |- store.js
</code></pre></div></li></ul> <h2 id="_4-2-求和案例-redux迷你版"><a href="#_4-2-求和案例-redux迷你版" class="header-anchor">#</a> 4.2  求和案例 redux迷你版</h2> <h2 id="_4-3-求和案例-redux完整版"><a href="#_4-3-求和案例-redux完整版" class="header-anchor">#</a> 4.3  求和案例 redux完整版</h2> <p>总体需要安装的包：</p> <ol><li>redux</li> <li>redux-thunk</li> <li>react-redux</li> <li>redux-devtools-extension</li></ol> <ul><li>注意：index.js中要使用store.subscribe来检测redux中状态的改变</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_4-4-异步action"><a href="#_4-4-异步action" class="header-anchor">#</a> 4.4 异步action</h2> <p>引入 applyMiddleware
引入 thunk</p> <ul><li>在store.js中：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./count_reducer'</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span> <span class="token comment">// 引入用于支持异步action的中间件</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span> <span class="token punctuation">(</span>countReducer<span class="token punctuation">,</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div><ul><li>异步action函数的返回值是一个函数，而不是{type,action}对象，因此store会自动识别出来。同时无需引入store，可直接在返回值函数中使用dispatch。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">creatIncrementAsyncAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">creatIncrementAction</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-5-react-redux的基本使用"><a href="#_4-5-react-redux的基本使用" class="header-anchor">#</a> 4.5  react-redux的基本使用</h2> <p>（1） 明确两个概念：</p> <ul><li><p>1）UI 组件： 不能使用任何redux的API，只负责页面的呈现、交互等</p></li> <li><p>1）容器组件：负责和redux通信，结果交给UI组件</p></li></ul> <p>（2）如何创建一个容器组件：靠react-redux的 connect函数</p> <ul><li><p>引入：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>connect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
</code></pre></div></li> <li><p>写法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">UI</span>组件<span class="token punctuation">)</span>
</code></pre></div><ul><li>mapStateToProps 映射状态，返回值需要是一个对象</li> <li>mapDispatchToProps 映射操作状态的方法，返回值需是一个对象</li></ul></li></ul> <p>（3）备注：容器组件中的store是在App.jsx中靠props传进去的，不是在容器组件中直接引入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>CountContainer store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div> <img src="C:/Users/victo/Desktop/source/Q  React/4-Redux/原理图/react-redux模型图.png" style="zoom:33%;"> <h2 id="_4-6-优化"><a href="#_4-6-优化" class="header-anchor">#</a> 4.6 优化</h2> <h3 id="_4-6-1-容器优化"><a href="#_4-6-1-容器优化" class="header-anchor">#</a> 4.6.1 容器优化 </h3> <p>mapDispatchToProps也可简单地定义为对象，此时react-redux会自动dispatch其中value为action的内容，如遇addasync这种返回一个函数的，走异步action流程。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">sum</span><span class="token operator">:</span>state<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 映射状态</span>

<span class="token keyword">const</span> mapDispatchToProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">add</span><span class="token operator">:</span> creatIncrementAction<span class="token punctuation">,</span>
  <span class="token literal-property property">subtract</span><span class="token operator">:</span> creatDecrementAction<span class="token punctuation">,</span>
  <span class="token literal-property property">addasync</span><span class="token operator">:</span> creatIncrementAsyncAction
<span class="token punctuation">}</span> <span class="token comment">// 映射操作状态的方法</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span>mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-6-2-provider"><a href="#_4-6-2-provider" class="header-anchor">#</a> 4.6.2 Provider </h3> <p>有了Provier, App.jsx中靠props给容器组件Count传进去的store可以删去，也免去了未来有多个容器组件需要store的麻烦。直接在index.js中，为App组件包一个Provider。</p> <ul><li>Provider同时有store.subscribe的功能,因此subscribe也可删去。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom&quot;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;./App&quot;</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">&quot;./redux/store&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Provider<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="_4-6-3-一个组件要和redux-打交道-要经过哪几步"><a href="#_4-6-3-一个组件要和redux-打交道-要经过哪几步" class="header-anchor">#</a> 4.6.3 一个组件要和redux“打交道”要经过哪几步 </h3> <ol><li>定义好UI组件——不暴露</li> <li>引入connect生产一个容器组件，并暴露，写法如下：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">connect</span><span class="token punctuation">(</span>
<span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 映射状态</span>
<span class="token punctuation">{</span><span class="token literal-property property">key</span><span class="token operator">:</span>xxxxxAction<span class="token punctuation">}</span> <span class="token comment">// 映射操作状态的方法</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">UI</span>组件<span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>在UI组件中通过this.props.xxxxx读取和操作状态</li> <li>容器组件和UI组件合二为一！</li></ol> <h2 id="_4-7-数据共享版-reducer合并"><a href="#_4-7-数据共享版-reducer合并" class="header-anchor">#</a> 4.7 数据共享版，reducer合并</h2> <p>在store中对多个组件的reducer进行合并：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> countReducer <span class="token keyword">from</span> <span class="token string">'./reducers/count'</span>
<span class="token keyword">import</span> personReducer <span class="token keyword">from</span> <span class="token string">'./reducers/person'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>

<span class="token keyword">const</span> allReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">sumUp</span><span class="token operator">:</span> countReducer<span class="token punctuation">,</span>      <span class="token comment">// 左边的key代表该reducer下处理并保存的state</span>
  <span class="token literal-property property">personInfo</span><span class="token operator">:</span> personReducer
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">createStore</span> <span class="token punctuation">(</span>allReducer<span class="token punctuation">,</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_4-8-开发者工具redux-devtools-extension"><a href="#_4-8-开发者工具redux-devtools-extension" class="header-anchor">#</a> 4.8 开发者工具Redux DevTools Extension</h2> <p>通过chrome store下载，并npm：
npm install --save redux-devtools-extension</p> <p>store.js引入并使用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> composeWithDevTools <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-devtools-extension'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> <span class="token function">composeWithDevTools</span><span class="token punctuation">(</span>
  <span class="token function">applyMiddleware</span><span class="token punctuation">(</span><span class="token operator">...</span>middleware<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// other store enhancers if any</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-9-纯函数和高阶函数"><a href="#_4-9-纯函数和高阶函数" class="header-anchor">#</a> 4.9 纯函数和高阶函数</h2> <h3 id="_4-9-1-纯函数"><a href="#_4-9-1-纯函数" class="header-anchor">#</a> 4.9.1 纯函数 </h3> <ol><li><p>一类特别的函数：只要同样的输入（实参），必定得到同样的输出（返回）</p></li> <li><p>必须遵守以下一些约束</p> <ul><li>不得改写参数数据</li> <li>不会产生任何副作用，例如网络请求、输入和输出设备</li> <li>不能调用Date.now()或者Math.random() 等不纯的方法</li></ul></li> <li><p>redux的reducer函数必须是一个纯函数：
！！！ 一定不要使用push\unshift等改变原数据的API</p></li></ol> <h3 id="_4-9-2-高阶函数"><a href="#_4-9-2-高阶函数" class="header-anchor">#</a> 4.9.2 高阶函数 </h3> <ol><li><p>理解：一类特别的函数</p> <ul><li><p>情况1：参数是函数</p></li> <li><p>情况2：返回的是函数</p></li></ul></li> <li><p>常见的高阶函数</p> <ol><li>定时器设置函数</li> <li>数组的forEach() map() filter() reduce() find() bind()</li> <li>promise</li> <li>react-redux中的connect函数</li></ol></li> <li><p>作用： 能实现更加动态，更加可扩展的功能</p></li></ol> <h1 id="第5章-react扩展知识及总结"><a href="#第5章-react扩展知识及总结" class="header-anchor">#</a> 第5章 React扩展知识及总结</h1> <h2 id="_5-1-setstate"><a href="#_5-1-setstate" class="header-anchor">#</a> 5.1 setState</h2> <p><strong>一、 setState()更新状态是异步还是同步的？</strong>--&gt; 要看setState的执行位置
（1）在【由react所控制的回调中】更新的动作是【异步】的：生命周期钩子、react事件监听回调
（2）在【非react控制的异步回调中】更新的动作是【同步】的：定时器回调、原生事件回调、Promise</p> <p><strong>二、setState的两种写法：</strong>
（1）对象式写法：setState(stateChange,[callback])
1.stateChange为状态改变对象（该对象可以体现出状态的更改）
2.callback是可选的回调函数，它在状态更新完毕、界面也更新后（render调用后）才被调用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>sum<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">sum</span><span class="token operator">:</span>sum<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'由React直接控制的add sum：'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>（2）函数式写法：setState(updater,[callback])
1.updater为【返回stateChange对象】的函数。
2.updater可以接收到state和props
3.callback是可选的回调函数，它在状态更新、界面也更新后(render调用后)才被调用。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">sum</span><span class="token operator">:</span> state<span class="token punctuation">.</span>sum<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><p><strong>总结：</strong></p> <ol><li>对象式的setState是函数式的setState的简写方式（语法糖）</li> <li>使用原则：
（1）如果新状态不依赖于原状态 ===&gt; 使用对象方式
（2）如果新状态依赖于原状态 ===&gt; 使用函数方式
（3）如果需要在setState()执行后获取最新的状态数据，要在第二个[callback]函数中读取</li></ol> <h2 id="_5-2-lazyload"><a href="#_5-2-lazyload" class="header-anchor">#</a> 5.2 LazyLoad</h2> <p>路由组件的lazyLoad，实现路由组件的分开打包：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 引入</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Home'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// 返回值为import函数</span>
<span class="token keyword">const</span> About <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./About'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>通过<code>&lt;Suspense fallback={&lt;Loading组件&gt;}&gt;</code>指定在加载得到打包文件前显示一个自定义的loading界面</p> <div class="language-js extra-class"><pre class="language-js"><code>    <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Loading<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/about&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>About<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/home&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Home<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
</code></pre></div><h2 id="_5-3-hooks"><a href="#_5-3-hooks" class="header-anchor">#</a> 5.3 Hooks</h2> <h3 id="_5-3-1-hooks是什么"><a href="#_5-3-1-hooks是什么" class="header-anchor">#</a> 5.3.1 Hooks是什么？ </h3> <ol><li>Hook是React 16.8.0版本增加的新特性/新语法</li> <li>可以让你在【函数组件】中使用 state 以及 其它的 React 特性</li></ol> <h3 id="_5-3-2-三个常用的hook"><a href="#_5-3-2-三个常用的hook" class="header-anchor">#</a> 5.3.2 三个常用的Hook </h3> <ol><li>State Hook： React.useState()</li> <li>Effect Hook: React.useEffect()</li> <li>Ref Hook: React.useRef()</li></ol> <h3 id="_5-3-3-state-hook"><a href="#_5-3-3-state-hook" class="header-anchor">#</a> 5.3.3 State Hook </h3> <ol><li>State Hook 让函数组件也可以有state状态，并进行状态数据的读写操作</li> <li>语法： const [xxx, setXxx] = React.useState(initValue)</li> <li>useState()说明：
参数：第一次初始化的值在内部作缓存
返回值：包含2个元素的数组，第1个为内部当前状态值，第2个为更新状态值的函数</li> <li>setXxx()2种写法：
setXxx(newValue):参数为非函数值，直接指定新的状态值，内部用其覆盖原来的状态值
setXxx(value =&gt; newValue):参数为函数，接收原本的状态值，返回新的状态值，内部用其覆盖原来的状态值
(第二种稳定性高)</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">const</span> <span class="token punctuation">[</span>sum<span class="token punctuation">,</span> setSum<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'老刘'</span><span class="token punctuation">)</span>

  <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// setSum(sum+3) // 以下情况写简写有问题</span>
    <span class="token function">setSum</span><span class="token punctuation">(</span><span class="token parameter">sum</span> <span class="token operator">=&gt;</span> sum<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 完整版 稳定性更高</span>
</code></pre></div><h3 id="_5-3-4-effect-hook"><a href="#_5-3-4-effect-hook" class="header-anchor">#</a> 5.3.4 Effect Hook </h3> <ol><li>Effect Hook 可以让你在函数组件中执行副作用操作，用于模拟类式组件中的生命周期勾子</li> <li>React中的副作用操作：
发送Ajax请求数据获取
设置订阅
启动定时器</li> <li>语法和说明：
componentDidMount():</li></ol> <div class="language- extra-class"><pre class="language-text"><code>  useEffect(()=&gt;{
    // 操作(仅在函数组件第一次调用后执行)
  },[])
</code></pre></div><p>componentDidUpdate():</p> <div class="language- extra-class"><pre class="language-text"><code>  1.不传第二个参数
  useEffect(()=&gt;{
    // 状态更新后执行的操作
  }) 

  或

  2.传第二个参数，且指定监测对象
  useEffect(()=&gt;{
    // 状态更新后执行的操作
  },[stateValue])
</code></pre></div><p>componentWillUnmount():</p> <div class="language- extra-class"><pre class="language-text"><code>  useEffect(()=&gt;{
    // 操作
    return ()=&gt;{
      // 收尾时的操作
    }
  },[])
</code></pre></div><h3 id="_5-3-5-ref-hook"><a href="#_5-3-5-ref-hook" class="header-anchor">#</a> 5.3.5 Ref Hook </h3> <ol><li>Ref Hook可以在函数组件中存储/查找组件内的标签或任意其它数据</li> <li>语法：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>const xxx = useRef()
</code></pre></div><p>用法与React.createRef()一模一样</p> <h2 id="_5-4-fragment"><a href="#_5-4-fragment" class="header-anchor">#</a> 5.4 Fragment</h2> <ol><li>作用，避免无用的嵌套层级</li> <li>使用
引入：</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> Fragment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
</code></pre></div><p>使用： <code>&lt;Fragment&gt;&lt;/Fragment&gt;或&lt;&gt;&lt;/&gt;</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">456</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="_5-5-context"><a href="#_5-5-context" class="header-anchor">#</a> 5.5 Context</h2> <ol><li>理解： 一种组件间的通信方式，常用于【祖组件】和【后代组件】间通信</li> <li>使用：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>1. 创建Context容器对象：（一般单独建立一个context.js，在需要的组件引入）
  const XXXContext = React.createContext()

2. 渲染子组件时，外面包裹xxxContext.Provider,或提前将Provider解构赋值出来，通过value属性给后代组件传递数据：
  &lt;xxxContext.Provider value={数据}&gt;
    子组件
  &lt;/xxxContext.Provider&gt;

3. 后代组件读取数据：

  // 第一种方式：仅适用于类组件
   static contextType = xxxContext // 声明接收context
   const {} = this.context // 解构赋值，读取context中的value数据

  // 第二种方式：函数组件与类组件都可以
    const {Consumer} = xxxContext

   export default function C() {
      return( 
      &lt;Consumer&gt;
        {
          (value) =&gt; (
            要显示的内容{value.xxx}
          )
        }
      &lt;/Consumer&gt;)
    }

</code></pre></div><ol start="3"><li>备注： 在开发中一般不用context，一般都用它封装react插件</li></ol> <h2 id="_5-6-组件间通信方式总结"><a href="#_5-6-组件间通信方式总结" class="header-anchor">#</a> 5.6 组件间通信方式总结</h2> <ul><li><p><em><strong>组件间的关系</strong></em></p> <ul><li>父子组件</li> <li>兄弟组件（非嵌套组件）</li> <li>祖孙组件（跨级组件）</li> <li>其他关系</li></ul></li> <li><p><em><strong>几种通信方式</strong></em></p> <ol><li>props：最简单的方式</li> <li>消息订阅-发布：pub-sub\event</li> <li>集中式管理: redux\dva</li> <li>context:生产者-消费者模式</li></ol></li> <li><p><em><strong>比较好的搭配方式：</strong></em></p> <ol><li>父子组件：props</li> <li>兄弟组件：消息订阅、集中式管理</li> <li>祖孙组件：消息订阅、集中式、context</li> <li>其他关系：消息订阅、集中式</li></ol></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/react/移动端开发相关.html">
        移动端开发相关
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.799e44f7.js" defer></script><script src="/assets/js/2.cad8c7e0.js" defer></script><script src="/assets/js/68.3af8b361.js" defer></script>
  </body>
</html>
